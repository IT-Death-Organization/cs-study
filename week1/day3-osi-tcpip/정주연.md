# OSI 7계층과 TCP/IP 4계층

> 📅 2025.02.15 | 📁 Week 1
> 

---

## 🧠 학습 질문

- [x]  OSI 7계층은 왜 나누어졌는가? 계층화의 장점은?
- [x]  각 계층의 역할과 프로토콜 예시는?
- [x]  TCP/IP 4계층과 OSI 7계층의 차이는?
- [x]  캡슐화와 역캡슐화란 무엇이며 어떻게 동작하는가?
- [x]  실제 통신에서는 어떤 모델을 사용하는가?
- [x]  계층을 넘어서 통신할 수 없는 이유는?

## OSI 7계층이 나누어진 이유 (+계층화의 장점)

- 통신 과정을 단계별로 파악할 수 있기 때문 (이해하기 쉬움)
- 7단계 중 한 곳에 이상이 생기면, 그 부분만 고칠 수 있기 때문
- 서로 다른 제조사의 장비/ SW라도 동일한 계층 규칙을 따르면 문제없이 통신 가능함

⇒ 즉, 복잡한 통신 과정을 표준화하여 장비 간 호환성을 높이고, 특정 계층의 변화가 다른 계층에 영향을 주지 않도록 독립성을 보장하기 위해 나누어짐 

## 각 계층의 역할과 프로토콜 예시

### 1. 물리계층

- 데이터를 전기적인 신호(0과 1)로 변환하여 실제 물리적인 매체(케이블)로 전송함. 장치 간의 물리적인 연결을 담당
- 전송 단위: 비트
- 프로토콜/장비: 리피터, 허브, 이더넷 케이블(가공 전), RS-232

### 2. 데이터 링크 계층

- 인접한 두 장치 간의 신뢰성 있는 정보 전송을 담당.  물리 계층에서 온 신호의 에러를 검출하고, **MAC 주소**를 통해 데이터를 어디로 보낼지 결정
- 전송 단위: Frame
- 프로토콜/장비: 이더넷, 스위치, 브릿지, MAC

### 3. 네트워크 계층

- 데이터를 목적지까지 가장 안전하고 빠르게 전달하는 라우팅을 담당. IP 주소를 사용하여 논리적인 경로를 설정함
- 전송 단위: 패킷
- 프로토콜/장비: IP, ICMP, 라우터

### 4. 전송 계층

- End-to-End의 사용자들이 신뢰성 있는 데이터를 주고받도록 해줌. 데이터의 분할, 재조립, 흐름 제어, 오류 제어를 수행하며, 포트번호를 사용
- 전송단위: Segment
- 프로토콜:TCP,UDP

### 5. 세션 계층

- 양 끝단의 응용 프로세스가 통신을 관리하기 위한 설정을 유지. 통신 세션을 구성하고, 동기화하며, 에러 발생 시 복구지점을 만듦
- 전송 단위: 메시지, 데이터
- 프로토콜: RPC, NetBIOS, SSH

### 6. 표현 계층

- 데이터의 형식(Format)을 결정. 서로 다른 기종 간에 데이터를 이해할 수 있도록 인코딩, 디코딩, **압축**, **암호화**를 수행
- 전송 단위: 데이터
- 프로토콜: JPEG, MPEG, GIF, ASCII, SSL/TLS

### 7. 어플리케이션 계층

- 사용자가 네트워크에 접근할 수 있도록 인터페이스를 제공. 우리가 직접 사용하는 프로그램들이 이 계층에 해당
- 전송 단위: 데이터
- 프로토콜: HTTP, DNS, FTP, SMTP, DHCP

## TCP/IP 4계층과 OSI 7계층의 차이

| **OSI 7계층 (Reference)** | **TCP/IP 4계층 (Practical)** | **주요 역할** |
| --- | --- | --- |
| **7. 응용 (Application)** | **4. 응용 (Application)** | 사용자 서비스 제공 (HTTP, FTP, DNS 등) |
| **6. 표현 (Presentation)** | (응용 계층에 통합됨) | 데이터 형식 변환, 암호화, 압축 |
| **5. 세션 (Session)** | (응용 계층에 통합됨) | 응용 프로세스 간 세션 관리 |
| **4. 전송 (Transport)** | **3. 전송 (Transport)** | 종단 간 신뢰성 있는 전송 (TCP, UDP) |
| **3. 네트워크 (Network)** | **2. 인터넷 (Internet)** | 목적지 IP 주소 기반 경로 설정 (IP) |
| **2. 데이터 링크 (Data Link)** | **1. 네트워크 인터페이스** | 물리적인 주소(MAC) 기반 인접 노드 통신 |
| **1. 물리 (Physical)** | (네트워크 인터페이스에 통합됨) | 전기 신호, 케이블 등 하드웨어 전송 |
- OSI 7계층은 이론적 가이드라인인 반면, TCP/IP 4계층은 실제 사용 기술을 바탕으로 만들어진 실무 중심 모델이다.
- OSI 7계층은 통신 시작 전 연결을 확인하는 연결지향적 성향이 강한 반면, TCP/IP 4계층은 데이터 전송 그 자체를 중시하며, 필요에 따라 연결과 비연결을 선택하여 사용하는 유연한 구조를 가진다.

## 캡슐화와 역캡슐화란 무엇이며 어떻게 동작하는가

### 캡슐화

- 송신 측에서 상위 계층의 데이터를 하위로 보내며, 각 계층의 제어정보(헤더)를 덧붙이는 과정
- 동작과정
    1. **Application (L7~L5):** 사용자가 보낸 순수 **데이터(Data)**가 생성됩니다.
    2. **Transport (L4):** 데이터 앞에 송/수신지 **포트 번호** 등이 담긴 헤더를 붙입니다. 이 단위를 **세그먼트(Segment)**라고 합니다.
    3. **Network (L3):** 세그먼트 앞에 송/수신지 **IP 주소**가 담긴 헤더를 붙입니다. 이 단위를 **패킷(Packet)**이라고 합니다.
    4. **Data Link (L2):** 패킷 앞에는 **MAC 주소** 헤더를, 뒤에는 에러 검출을 위한 **트레일러(Trailer)**를 붙입니다. 이 단위를 **프레임(Frame)**이라고 합니다.
    5. **Physical (L1):** 최종 완성된 프레임을 전기 신호인 **비트(Bit)**로 변환하여 전송합니다.

### 역캡슐화

- **수신 측**에서 물리 계층으로 들어온 신호를 상위 계층으로 올리며, 각 계층의 **헤더를 하나씩 제거**하고 데이터를 확인하는 과정
- 동작과정
    - **Physical (L1):** 전기 신호를 수신하여 **비트**를 **프레임**으로 복원합니다.
    - **Data Link (L2):** 프레임의 헤더(MAC 주소)를 보고 "나에게 온 것이 맞는지" 확인한 뒤, 헤더와 트레일러를 떼어내고 **패킷**을 상위로 보냅니다.
    - **Network (L3):** 패킷의 헤더(IP 주소)를 확인하고 자신의 IP와 일치하면 헤더를 제거한 뒤 **세그먼트**를 상위로 보냅니다.
    - **Transport (L4):** 세그먼트의 헤더(포트 번호)를 확인하여 어떤 응용 프로그램(HTTP 등)에 전달할지 판단하고, 헤더를 제거한 **순수 데이터**를 전달합니다.
    - **Application (L7):** 최종적으로 사용자는 전송된 원본 데이터를 보게 됩니다.

### 캡슐화를 하는 이유

- **정보 은닉 (Information Hiding):** 상위 계층은 하위 계층이 어떻게 동작하는지 알 필요가 없으며, 본인 계층의 헤더만 해석하면 됨
- **표준화:** 각 계층이 독립적으로 제어 정보를 관리하므로, 통신 프로토콜을 교체하거나 수정하기 쉬움
- **에러 제어 및 흐름 제어:** 헤더에 담긴 정보를 통해 데이터 누락을 확인하거나 수신지를 정확히 찾아갈 수 있음

## 실제 통신에서는 어떤 모델을 사용하는가

### 결론부터 ⇒ TCP/IP 모델

### WHY?

- TCP/IP는 미 국방부에서 연구를 시작하여 실제 통신 기술 바탕으로 먼저 만들어짐. / 반면 OSI 는 표준을 먼저 정한다음 기술을 맞추려다 보니, 현장 도입이 늦어짐
- OSI는 너무 세분화되어 있느 실제 SW로 구현하기엔 복잡.
- OSI는 이론적 참조 모델로서 장비분류/ 교육에 주로 활용됨. ( e.g. 이 장비는 L2 스위치이다 = 데이터 링크 계층에서 동작하는 장비다)

## 계층을 넘어서 통신할 수 없는 이유

### 캡슐화 / 역캡슐화의 불일치 (받는 쪽이 해석 못 함)

- 각 계층은 바로 위 계층에서 내려온 데이터를 '알맹이(Payload)'로 취급하고, 그 앞에 자신의 계층 정보를 담은 '헤더(Header)'를 붙임
- 만약 L4(전송 계층)가 L3(네트워크 계층)를 건너뛰고 L2(데이터 링크 계층)로 데이터를 보낸다면, L2 헤더 뒤에는 L3 헤더가 아닌 **L4 헤더가 바로 붙게  됨**
- 수신 측의 L2는 헤더를 떼고 L3로 데이터를 올리려 하겠지만, 그 자리에는 L3가 기대하는 'IP 주소 정보'가 아닌 '포트 번호(L4)'가 들어있음. 결국 수신 측 L3는 이를 쓰레기 데이터로 판단하고 폐기하게 됨

### 하위 계층에 대한 추상화 실패

계층화의 목적: 자기 할 일만 하고 나머지는 모르게 하는 것 (Black box)  

- **인터페이스 규약:** 상위 계층은 하위 계층이 '어떻게' 동작하는지는 몰라도 되지만, 반드시 하위 계층이 제공하는 **인터페이스**를 통해서만 데이터를 내려보내야 함
- **역할 분담:** L4는 "데이터를 목적지에 신뢰성 있게 보낸다"는 것만 알 뿐, "어떤 경로(L3)로 갈지"나 "어떤 물리 매체(L2, L1)를 쓰는지"는 모름
- **결과:** 계층을 건너뛴다는 것은 상위 계층이 하위 계층의 역할까지 직접 수행해야 한다는 뜻이며, 이는 계층 구조의 가장 큰 장점인 **모듈화와 독립성**을 완전히 파괴하는 행위

### 필수 정보의 누락

각 계층은 통신에 꼭 필요한 '다른 정보'를 처리한다.  계층을 건너뛰면 통신 자체가 불가능해진다.

- **L3(네트워크)를 건너뛰면?** IP 주소를 통한 경로 찾기(Routing)가 불가능해져, 데이터가 내 로컬 네트워크 밖으로 나갈 수 없음
- **L4(전송)를 건너뛰면?** 데이터의 순서가 바뀌거나 유실되어도 복구할 방법이 없으며, 어떤 프로그램(포트)으로 보내야 할지도 모르게 됨

---

## 📎 참고 자료

<!-- 공부하면서 참고한 링크를 여기에 추가해주세요 -->

---

## 💬 토론 포인트

<!-- PR 리뷰 또는 스터디 중 나온 추가 질문이나 논의 사항을 기록해주세요 -->