# Day 3: OSI 7계층과 TCP/IP 4계층
> 📅 2025.02.15 | 📁 Week 1

---

## 🧠 학습 질문

- [x] OSI 7계층은 왜 나누어졌는가? 계층화의 장점은?
- [x] 각 계층의 역할과 프로토콜 예시는?
- [x] TCP/IP 4계층과 OSI 7계층의 차이는?
- [x] 캡슐화와 역캡슐화란 무엇이며 어떻게 동작하는가?
- [x] 실제 통신에서는 어떤 모델을 사용하는가?
- [x] 계층을 넘어서 통신할 수 없는 이유는?

<br>

# 1. OSI 7계층은 왜 나누어졌는가? 계층화의 장점은?

네트워크 통신은 아주 복잡한 과정을 거칩니다. 이를 한번에 처리하는 대신, 7개의 계층으로 나누어 표준화와 관리의 용이성을 얻습니다.

각 계층은 독립적인 자신만의 역할이 있고, 특정 계층에서 문제가 생기면 해당 계층만 수정하면 됩니다.

전 세계의 모든 장비 제조사들은 모두 OSI 모델이라는 공통된 규격을 따르기 때문에 장비 제조사가 달라도 통신이 가능해집니다. 삼성에서 만든 공유기를 아이폰이 사용할 수 있는 이유입니다.

<br>

# 2. 각 계층의 역할과 프로토콜 예시는?

| 계층 (Layer) | 주요 역할 | 프로토콜 / 장비 예시 |
| :--- | :--- | :--- |
| **7. 응용 (Application)** | 사용자 인터페이스 제공, 서비스 요청 | HTTP, FTP, SMTP, DNS |
| **6. 표현 (Presentation)** | 데이터 형식 변환, 암호화, 압축 | JPEG, MPEG, SSL/TLS |
| **5. 세션 (Session)** | 응용 프로세스 간의 통신 관리 (연결 유지/복구) | RPC, NetBIOS |
| **4. 전송 (Transport)** | 종단 간(End-to-End) 신뢰성 있고 효율적인 데이터 전송 | TCP, UDP |
| **3. 네트워크 (Network)** | 최적의 경로 설정(라우팅), 목적지 IP 주소 지정 | IP, ICMP, 라우터 |
| **2. 데이터 링크 (Data Link)** | 물리적 매체를 통한 인접 노드 간 신뢰성 있는 전송 | Ethernet, MAC 주소, 스위치 |
| **1. 물리 (Physical)** | 비트(0, 1) 데이터를 전기/광 신호로 변환하여 전송 | 허브, 리피터, 케이블 |

---
<br>

* 상위 계층(5~7): 사용자가 직접 체감하는 영역으로, 주로 데이터의 내용과 형식을 다룹니다.
* 하위 계층(1~4): 데이터가 목적지까지 잘 전달되도록 하는 운송 역할을 담당합니다.

### L4 로드벨런서 & L7 로드벨런서
L4는 IP와 포트 번호(전송 계층)를 보고 트래픽을 분산하고, L7은 실제 HTTP 메시지 내용(응용 계층)까지 확인하여 더 세밀하게 트래픽을 분산한다는 차이가 있습니다.

<br>

# 3. TCP/IP 4계층과 OSI 7계층의 차이는?

TCP/IP 모델은 OSI 7계층을 통합한 더 단순한 구조를 가집니다.

### 응용 계층 통합 (OSI 5,6,7)
OSI의 5(세션), 6(표현), 7(응용) 계층을 TCP/IP에서는 하나의 응용 계층(Application Layer)으로 묶었습니다. 이 3가지 단계는 실무적으로 하나의 프로그램 안에서 일어나는 경우가 많기 때문입니다.

### 네트워크 인터페이스 계층 (OSI 1,2)
OSI의 1(물리), 2(데이터 링크) 계층을 TCP/IP에서는 네트워크 인터페이스(또는 네트워크 액세스) 계층으로 통합하여 물리적인 전송과 데이터 프레임 구성을 함께 다룹니다.

<br>

| TCP/IP 4계층 | OSI 7계층 | 주요 특징 | 주요 프로토콜/기술 |
| :--- | :--- | :--- | :--- |
| **응용 (Application)** | 응용 + 표현 + 세션 | 사용자가 사용하는 소프트웨어 영역 | HTTP, DNS, FTP, SMTP |
| **전송 (Transport)** | 전송 (Transport) | 프로세스 간 신뢰성 있는 통신 보장 | TCP, UDP |
| **인터넷 (Internet)** | 네트워크 (Network) | 패킷을 목적지 주소로 라우팅 | IP, ICMP, ARP, RARP |
| **네트워크 인터페이스** | 데이터 링크 + 물리 | 물리적 주소(MAC)와 하드웨어 전송 | Ethernet, Wi-Fi, MAC |
---

이렇게 TCP/IP는 4개의 계층을 가지게 됩니다.

OSI 7계층은 이론적인 설계도 모델, TCP/IP 4계층은 현재 우리가 사용하는 인터넷 프로토콜 스택의 표준으로, 실무적인 모델이라고 생각하면 됩니다.

<br>

# 4. 캡슐화와 역캡슐화란 무엇이며 어떻게 동작하는가?

각 계층끼리 데이터를 주고받을 때 그냥 보내지 않습니다. 각 계층은 통신에 필요한 정보(주소, 제어 정보 등)를 담은 헤더(Header)를 데이터에 붙여 나갑니다. 이 과정을 캡슐화라고 합니다.

### 캡슐화
사용자가 보낸 데이터가 상위 계층에서 하위 계층으로 내려오면서 각 계층에서 데이터에 헤더를 붙이는 과정입니다.

* Application: 실제 데이터(Data) 생성.
* Transport: 데이터에 포트 번호(Port)가 담긴 헤더를 붙여 세그먼트(Segment)를 만듦.
* Network: IP 주소가 담긴 헤더를 붙여 패킷(Packet)을 만듦.
* Data Link: MAC 주소가 담긴 헤더와 에러 체크를 위한 트레일러를 붙여 프레임(Frame)을 만듦.
* Physical: 최종적으로 비트(0, 1) 신호로 변환하여 전송.

### 역캡슐화
수신 측에서는 이 과정의 반대로, 하위 계층에서 상위 계층으로 올라가면서 헤더를 하나씩 제거하고 최종 데이터만 남기는 과정입니다.

각 계층에서는 자신에게 해당하는 헤더 정보를 확인하여 목적지가 맞는지, 에러는 없는지 검사합니다.

검사가 끝나면 헤더를 제거 후 데이터만 위로 올려보냅니다.

최종적으로 응용계층에 도달하면 처음 보냈던 순수한 데이터만 남습니다.

---

참고로 각 계층에서 다루는 데이터 묶음을 PDU(Protocol Data Unit)라고 부릅니다.


<br>

# 5. 실제 통신에서는 어떤 모델을 사용하는가?

우리가 사용하는 실제 인터넷 세상은 TCP/IP 4계층 모델을 사용합니다.

OSI 모델은 국제표준화기구(ISO)에서 "통신은 이렇게 해야 한다"라고 만든 학문적 표준입니다. 하지만 실제 시장에서는 이 표준이 완성되기 전부터 이미 TCP/IP를 기반으로 인터넷이 구축되었습니다. 그 결과, 전 세계의 하드웨어와 소프트웨어는 TCP/IP 모델을 기반으로 설계되었습니다.

실제 구현은 TCP/IP로 되어 있지만, 엔지니어들이 소통할 때는 OSI 모델의 계층 번호를 여전히 많이 사용합니다.

* 트러블슈팅: "지금 L3(네트워크 계층) 단에서 패킷이 안 넘어가고 있어요"라고 하면 IP 주소나 라우팅 설정을 확인하라는 뜻입니다.
* 장비 지칭: "L4 로드밸런서"라고 하면 TCP/UDP의 포트 번호를 기준으로 트래픽을 분산하는 장비를 의미합니다.

### 5계층 모델 (Updated TCP/IP)
최근 학계나 실무에서는 TCP/IP의 1계층(네트워크 인터페이스)이 너무 광범위하다는 점을 보완하기 위해, OSI의 하위 1, 2계층을 분리한 5계층 모델로 설명하기도 합니다.

| 5계층 모델 | OSI 7계층 | TCP/IP 4계층 | 주요 역할 |
| :--- | :--- | :--- | :--- |
| **응용 (Application)** | 7. 응용 + 6. 표현 + 5. 세션 | 응용 | 사용자 서비스 제공 |
| **전송 (Transport)** | 4. 전송 | 전송 | 종단 간 신뢰성 보장 |
| **네트워크 (Network)** | 3. 네트워크 | 인터넷 | IP 주소 기반 라우팅 |
| **데이터 링크 (Data Link)** | 2. 데이터 링크 | 네트워크 인터페이스 | MAC 주소, 프레임 전송 |
| **물리 (Physical)** | 1. 물리 | 네트워크 인터페이스 | 비트 신호 전송 |

---
백엔드 개발자라면 작성하는 코드가 주로 L4(Transport)와 L7(Application) 사이에서 동작하게 됩니다.

<br>

# 6. 계층을 넘어서 통신할 수 없는 이유는?

소프트웨어 공학에는 대원칙이 존재합니다. 모듈화(Modularity)와 은닉화(Information Hiding)가 그 예입니다.

기술적으로는 계층을 뛰어넘는 구조를 만들 수도 있겠지만, 그렇게 하지 않는 이유는 모듈화와 은닉화 원칙을 지키기 위함입니다.

1) 계층간 독립성 유지

계층간의 독립성을 유지하면 한 계층의 내부 구현이 변경되어도 다른 계층에 영향을 주지 않습니다.

프론트앤드 개발자라면 컴포넌트화(Component-Based Development)를 통해, 백엔드 개발자라면 객체지향적 설계(Object-Oriented Programming)를 통해 많이 접해본 개념일 것입니다.

2) 상위 계층의 복잡성 제거 (추상화)

상위 계층은 하위 계층이 어떻게 데이터를 전달하는지 구체적인 방식은 몰라도 됩니다. 예를 들어, 응용 계층은 데이터를 보내는 것만 신경 쓰면 되지, 그 데이터가 물리적으로 어떻게 전송되는지(전기 신호, 전파 등)는 알 필요가 없습니다.

---

예를 들어 5G라는 새로운 물리 계층 기술이 나와도, 우리가 쓰는 HTTP(응용 계층) 프로토콜은 아무런 수정 없이 그대로 사용할 수 있는 것이 바로 계층 구조의 힘입니다.