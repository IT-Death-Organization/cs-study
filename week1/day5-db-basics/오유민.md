# Day 5: 데이터베이스 기초 (RDBMS vs NoSQL)

> 📅 2025.02.17 | 📁 Week 1

---

## 🧠 학습 질문

- [x] 데이터베이스가 파일 시스템보다 나은 이유는?
- [x] RDBMS와 NoSQL의 차이는? 각각의 장단점은?
- [x] RDBMS는 언제 사용하고, NoSQL은 언제 사용하는가?
- [x] CAP 이론이란 무엇인가? (일관성, 가용성, 분할 내성)
- [x] NoSQL의 종류(Key-Value, Document, Column-Family, Graph)와 차이는?
- [x] 스키마가 있는 것과 없는 것의 장단점은?

---

### 📌 [Q1] 데이터베이스가 파일 시스템보다 나은 이유는?

**1. 데이터 중복 최소화 & 데이터의 일관성**

- 파일 시스템에서는 각 파일이 서로 독립적으로 존재하므로 같은 데이터를 여러 파일에 저장할 수 있어 중복이 발생한다. 또한 데이터 수정 시 모든 파일을 다 바꿔야 하며, 그렇지 않은 경우 데이터 불일치가 발생할 수 있다.
- 데이터베이스는 정규화된 테이블 구조에서 데이터를 통합 관리하므로 중복이 최소화되고, 하나의 데이터는 한 곳에서 관리 및 수정할 수 있다. 또한 데이터베이스는 트랜잭션을 보장하고 ACID 특성으로 데이터의 무결성을 유지한다.

**2. 동시성 제어**

- 파일 시스템은 여러 사용자가 동시에 접근하면 충돌 위험이 있고, 덮어쓰기 문제가 발생할 수 있다.
- 데이터베이스는 트랜잭션, Lock, MVCC 등으로 동시성 제어가 가능하다.

**3. 데이터 무결성 보장**

- 데이터베이스는 데이터가 규칙(Primary Key, Foreign Key, Unique, Not Null, Check)을 따르도록 강제할 수 있지만, 파일 시스템은 그렇지 않다.

**4. 보안**

- 파일 시스템은 파일 자체에 대한 읽기/쓰기 권한 정도만 설정할 수 있다.
- 데이터베이스는 사용자/권한/role 단위 접근 등 세밀한 제어가 가능하다.

\*트랜잭션 <br>
: 더이상 분할이 불가능한 업무처리의 단위

### 📌 [Q2] RDBMS와 NoSQL의 차이는? 각각의 장단점은?

**RDBMS(관계형 데이터베이스)**
Relational Database Management System의 약자로, 데이터를 Table 형태에 맞춰 저장한다.

- SQL이라는 정형화된 언어로 데이터를 다룬다. 데이터 간의 관계를 맺는 것이 핵심이다.
- ex) MySQL, PostgreSQL, Oracle. MS-SQL
- 장점
  - 데이터 무결성 보장: 데이터 구조가 엄격해서 잘못된 데이터가 들어오는 것을 방지
  - 중복 제거: 데이터를 여러 테이블에 나눠 담고 연결(join)하므로 데이터 중복이 적음
  - 트랜잭션(ACID): 결제 시스템처럼 오차가 없어야 하는 작업에 매우 강력
- 단점
  - 확장성: 데이터 양이 폭증할 때 서버 성능을 높이는 수직 확장(Scale-up)은 쉽지만, 여러 대의 서버로 나누는 수평 확장(Scale-out)은 어렵고 비용이 많이 듦
  - 유연성 부족: 한 번 정해진 테이블 구조(스키마)를 바꾸기 까다로움

**NoSQL(비관계형 데이터베이스)**
Not Only SQL의 약자로, 정해진 표(table) 형식이 아니라 자유로운 형태의 데이터를 저장한다. (주로 JSON 객체 형태가 많음)

- ex) MongoDOM(Document형), Redis(Key-Value형), Cassandra
- 장점
  - 유연성: 데이터 구조가 결정되지 않아도 바로 저장할 수 있고, 언제든 필드를 추가 가능
  - 확장성: 처음부터 여러 대의 저렴한 서버에 데이터를 분산 저장(Scale-out)하도록 설계되어 대용량 처리에 유리
  - 빠른 읽기/쓰기: 복잡한 관계(join) 계산이 없어 단순 조회 속도가 매우 빠름
- 단점
  - 데이터 중복: 관계를 맺지 않으므로 데이터 여러 곳에 중복 저장될 수 있음 (하나 수정되면 다 찾아가서 고쳐야 함)
  - 일관성 위험: 데이터가 여러 서버에 퍼져 있다 보니, 찰나의 순간에 데이터가 서로 다를 수 있음

### 📌 [Q3] RDBMS는 언제 사용하고, NoSQL은 언제 사용하는가?

**RDBMS**
: 데이터 정합성(consistency)과 관계가 중요한 경우

- 데이터 무결성이 중요한 경우 (결제 시스템, 은행 시스템, 주문/재고 관리)
- 데이터 간 관계가 복잡한 경우 (JOIN이 많이 필요한 서비스)
- 트랜잭션이 중요한 경우 (모두 성공하거나 모두 실패해야 하는 작업 -> 결제 성공, 재고 감소, 주문 생성 st, 하나라도 실패하면 롤백해야 함)\

**NoSQL**
: 대규모 트래픽 + 유연한 데이터 구조 + 빠른 확장이 필요한 경우

- 데이터 구조가 자주 바뀌는 경우
- 비정형(unstructured) 데이터가 많은 경우 (JSON 형태 데이터, 로그 데이터, 채팅 메세지)
- 대용량 트래픽 처리 (sns 피드, 좋아요 수, 실시간 채팅 등, 수평 확장에 강함)

### 📌 [Q4] CAP 이론이란 무엇인가? (일관성, 가용성, 분할 내성)

**일관성 (Consistency, C)**

- 정의: 모든 노드(서버)가 같은 시간에 동일한 데이터를 보여줘야 한다.
- 상태: 내가 A 서버에 데이터를 썼다면, 바로 B 서버에서 조회해도 똑같이 업데이트된 데이터가 나와야 한다. (어디서 읽어도 항상 최신 데이터 유지)

**가용성 (Availability, A)**

- 정의: 모든 요청에 대해 항상 응답을 받을 수 있어야 한다. (일부 서버가 죽어도 서비스는 계속 되어야 함)
- 상태: 데이터가 최신이 아니더라도 일단 시스템은 멈추지 않고 응답을 준다. (에러 없이 응답)

**분할 내성(Partion Tolerance, P)**

- 정의: 서버 간의 네트워크 연결이 끊어지는 '분할' 상황이 발생해도 시스템은 정상 작동해야 한다.
- 상태: 분산 시스템(클라우드 등) 환경에서는 네트워크 장애가 언제든 일어날 수 있으므로, 현대 시스템에서 P는 거의 필수적으로 선택된다.

CAP 이론은 분산 시스템(여러 대의 서버가 나누어 일을 처리하는 시스템)을 설계할 때, '모든 것을 다 가질 수는 없다'는 것을 증명한 이론이다.
즉 **C, A, P 세 가지를 동시에 완벽하게 만족하는 분산 시스템은 존재할 수 없다.**

**CAP의 3가지 유형**
**CP 시스템 (일관성 + 분할 내성)**

- 상황: 네트워크가 끊기면, 데이터 불일치를 막기 위해 응답을 거부(가용성 포기)합니다.
- 특징: 돈이 오가는 뱅킹 서비스처럼 정확도가 생명인 곳에 사용합니다.
- 예시: RDBMS, Redis, MongoDB(기본 설정)

**AP 시스템 (가용성 + 분할 내성)**

- 상황: 네트워크가 끊겨도, 일단 **기존 데이터라도 응답(일관성 포기)**합니다. 나중에 네트워크가 복구되면 데이터를 맞춥니다.
- 특징: SNS 게시물이나 좋아요 수처럼, 잠깐 데이터가 안 맞아도 서비스가 중단되지 않는 게 더 중요한 곳에 사용합니다.
- 예시: Cassandra, DynamoDB

**CA 시스템 (일관성 + 가용성)**

- 상황: 네트워크 장애가 절대 없다고 가정하는 시스템입니다.
- 특징: 하지만 분산 환경에서 네트워크 장애가 없을 수는 없기에, 사실상 **단일 서버(분산되지 않은 DB)**에서나 가능한 모델입니다.

### 📌 [Q5] NoSQL의 종류(Key-Value, Document, Column-Family, Graph)와 차이는?

**Key-Value**
: 가장 단순한 형태인 Key - Value 구조 (ex. Redis)

- 장점
  - 속도 매우 빠름
  - 캐시용으로 적합
- 단점
  - 검색 기능 제한적
  - 복잡한 쿼리 불가능
- 쓰는 경우
  - 세션 저장
  - 캐시
  - 조회수 카운트

**Document Store**
: JSON 객체 단위로 저장, 유연한 스키마 (ex. MongoDB)

- 장점
  - JOIN 없이 한 번에 읽기 가능
  - 프론트와 구조 유사
- 단점
  - 데이터 중복 증가 가능
  - 복잡한 관계 표현 어려움
- 쓰는 경우
  - sns 피드
  - 블로그, 게시글

**Column-Family Store**
: 열(column) 중심 저장, 수평 확장(Scale-out)에 최적화 되어있고 특정 칼럼만 빠르게 조회 (ex. Apache Cassandra)

- 장점
  - 대용량 데이터 처리에 강함
  - 읽기/쓰기 성능 우수
- 단점
  - 설계 난이도 높음
  - JOIN 없음
- 쓰는 경우
  - 로그 시스템
  - IoT 데이터
  - 대규모 분석 시스템

**Graph Database**
: 노드 + 엣지 구조의 관계 중심 데이터베이스로, 관계를 직접 저장하고 JOIN보다 관계 탐색이 빠름 (ex. Neo4j)

```
(User) --[FRIEND]--> (User)
(User) --[LIKES]--> (Post)
```

- 장점
  - 관계 탐색 매우 빠름
  - 추천 시스템에 강함
- 단점
  - 범용 DM로는 덜 사용
  - 학습 비용 있음
- 쓰는 경우
  - 추천 알고리즘
  - 경로 탐색

**정리** <br>
NoSQL은 데이터 모델에 따라 Key-Value, Document, Column-Family, Graph 방식으로 나뉩니다.
Key-Value는 단순하고 빠른 캐시용에 적합하고,
Document는 JSON 기반으로 유연한 데이터 저장에 적합하며,
Column-Family는 대규모 데이터 처리에 강하고,
Graph는 관계 중심 데이터에 최적화되어 있습니다.

### 📌 [Q6] 스키마가 있는 것과 없는 것의 장단점은?

**스키마가 있는 경우**
: 데이터를 저장하기 전에 구조를 미리 정의 (ex. MySQL, PostgreSQL)

- 장점
  - 데이터 무결성 보장 (타입 고정) -> 잘못된 데이터 저장 방지
  - 데이터 일관성 유지 (모든 row가 동일한 구조) -> 예측 가능, 협업에 유리
  - 복잡한 쿼리 가능 (JOIN, 집계, 트랜잭션 강함)
- 단점
  - 스키마 변경이 어려움 (컬럼 추가/삭제 시 마이그레이션 필요)
  - 초기 설계 부담이 큼

**스키마가 없는 경우**
: 데이터 구조를 강제하지 않음 (ex. MongoDB)

- 장점
  - 유연성 (필드 자유롭게 추가 가능)
  - 비정형 데이터에 적합 (JSON 구조, 필드가 매번 달라도 저장 가능)
  - 프론트 구조와 유사 (React의 state랑 비슷)
- 단점
  - 데이터 불일치 위험 -> 같은 의미의 데이터인데도 필드 다를 수 있음 (name, username)
  - DB가 데이터 검증을 강제하지 않음 -> 애플리케이션에서 직접 해야 함
  - 관계 표현 어려움 (JOIN 약함) -> 중복 데이터 증가

**정리** <br>
스키마가 있는 데이터베이스는 구조가 고정되어 있어 데이터 무결성과 일관성을 보장할 수 있지만, 구조 변경이 어렵다는 단점이 있습니다.
반면 스키마가 없는 데이터베이스는 유연한 데이터 저장이 가능해 빠른 개발에 유리하지만, 데이터 일관성이 깨질 위험이 있습니다.

---

## 📎 참고 자료

<!-- 공부하면서 참고한 링크를 여기에 추가해주세요 -->

---

## 💬 토론 포인트

<!-- PR 리뷰 또는 스터디 중 나온 추가 질문이나 논의 사항을 기록해주세요 -->
