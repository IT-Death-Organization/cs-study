# Day 2: 프로세스와 스레드
> 📅 2025.02.14 | 📁 Week 1

---

## 🧠 학습 질문

- [ ] 프로세스와 프로그램의 차이는?
- [ ] 프로세스와 스레드의 차이를 메모리 구조 관점에서 설명하면?
- [ ] 멀티 프로세스와 멀티 스레드의 장단점은? 어떤 경우에 무엇을 선택하는가?
- [ ] 스레드가 스택을 독립적으로 가지는 이유는? 힙은 왜 공유하는가?
- [ ] 프로세스 간 통신(IPC) 방법은? (파이프, 메시지 큐, 공유 메모리, 소켓)
- [ ] Context Switching이 프로세스보다 스레드에서 더 빠른 이유는?

---

1. 프로세스와 프로그램의 차이는?
프로세스는 어떤 작업을 실행할 수 있는 파일이다. 예를 들어, 내 컴퓨터에 깔려있는 크롬, vscode, zoom과 같은 파일들을 프로그램이라고 볼 수 있다.
반면, 프로세스는 이러한 프로그램들을 실행하여 CPU를 차지하면서 실행 중인 ‘동적인 상태’를 의미한다. 

다시 말해, 프로그램은 파일이 저장 장치에 있지만, 메모리에는 올라가지 않은 정적인 상태이다. 즉, 그냥 코드 덩어리이다. 하지만 프로세스는 메모리에 적재되고 CPU의 자원을 할당받아 프로그램이 실행되고 있는 상태이므로 코드 덩어리를 실행한 것이다.

이때 프로그램은 하나이지만, 이 프로그램이 실행되는 인스턴스는 여러개 일 수 있다. 즉, 크롬이라는 프로그램은 하나이지만, 크롬을 여러번 더블 클릭하여 만든 여러 창들은 프로그램을 실행하는 인스턴스인 프로세스이다.
 
---

2. 프로세스와 스레드의 차이를 메모리 구조 관점에서 설명하면? / 4. 스레드가 스택을 독립적으로 가지는 이유는? 힙은 왜 공유하는가?
스레드란, 하나의 프로세스 안에서 동시에 진행되는 작업 흐름이다. 스레드는 하나의 프로레스 안에서 여러가지 작업들 흐름이 동시에 진행되기 때문에 우리가 크롬과, vscode, zoom 같은 여러 프로그램을 동시에 할 수 있게 해준다.  

프로그램이 실행되어 프로세스가 만들어지면, 4가지 메모리 영역을 할당받게 된다. Text, Data, Heap, Stack. 
스레드는 프로세스의 4가지 영역 중 Stack만 복사하고, 나머지 Text, Data, Heap은 프로세스 내 다른 스레드들과 공유한다.

왜 그런걸까? Stack 영역에는 함수 호출 정보, 지역변수, 매개변수, 리턴 주소 등이 저장된다. 그리고 스레드는 “독립적인 실행 흐름”이다. 즉, 같은 프로세스 안에서 동시에 여러 함수가 실행되는 것이다. 

예를 들어, 두 스레드가 동시에 실행된다면, 각각의 x 변수는 서로 달라야 하며, 리턴 주소도 각각 따로 저장되어야 한다. 이러한 정보는 모두 Stack에 저장된다. 따라서 스레드마다 Stack이 반드시 따로 존재해야 한다.

Text, Data, Heap을 공유하는 이유는 스레드들 사이에서 자원을 공유해야 하기 때문이다. Text 영역에 저장되는 코드는 동일하며, Data 영역의 전역 변수도 함께 공유하는 것이 목적에 맞다. Heap 영역의 동적 메모리 또한 동적으로 생성한 객체를 여러 스레드가 함께 사용하는 경우가 많다.

정리하자면, 스레드는 실행 흐름을 독립적으로 유지하기 위해, 함수 호출 정보가 저장되는 Stack만 따로 가지며, Text/Data/Heap 영역에서는 자원을 공유한다.

---
 
3. 멀티 프로세스와 멀티 스레드의 장단점은? 어떤 경우에 무엇을 선택하는가?
(멀티태스킹은 “하나의 CPU”가 여러 작업을 짧은 단위로 전환하며 동시에 실행되는 것처럼 보이게 하는 방식이다.)
멀티프로세스는 “여러 CPU”를 사용해 여러 프로세스를 물리적으로 동시에 실행하는 방식이다.
멀티스레드는 하나의 프로세스가 여러 작업을 여러 스레드를 사용하여 동시에 처리하는 방식이다.

멀티프로세스의 장점:
- 하나의 프로세스가 죽어도, 다른 프로세스는 영향이 없으므로 안정성이 보장된다.
- 각자 독립된 주소 공간을 가지고 있어 메모리 보호와 보안에 유리하다.
멀티프로세스의 단점:
- 각 프로세스마다 Text, Data, Heap, Stack을 가지고 있기에 중복 자원이 발생되기 때문에 메모리 사용량이 많다.
- 주소 공간 변경과 page table 교체 등의 context switching의 비용이 크다. 

멀티스레드의 장점:
- Context switching 시, 공유하고 있는 메모리만큼의 메모리 자원을 아낄 수 있다. => 빠른 context switching과 자원 효율성 굿!
- 스레드는 프로세스 내 stack 영역을 제외한 모든 메모리를 공유하기 때문에 통신의 부담이 적어 응답이 빠르다.
멀티스레드의 단점: 
- 하나의 스레드가 crash 나면, 프로세스 전체가 종료되어 안정성이 낮다.
- 메모리 공유는 공간을 침범 가능하다는 뜻이기에 보안과 격리에 약하다.

---

4. 프로세스 간 통신(IPC) 방법은?
IPC(Inter-Process Communication): 서로 다른 “프로세스가 데이터를 주고 받으며 정보를 교환하는 방법

- 파이프: 한 프로세스의 출력이 다른 프로세스의 입력이 되는 방식
	- FIFO 구조로 단방향 통신을 한다.
	- 부모-자식 프로세스 간에 주로 사용된다.
	- 장점: 간단하며 OS가 관리한다.
	- 단점: 서로 관련된 프로세스여야 하며, 네트워크 통신이 불가하다.

- 메세지 큐: OS가 제공하는 큐로 메세지 전달하는 방식
	- 여러 프로세스 간 통신이 가능하다.
	- 비동기적 통신이 가능하다.
	- 장점: 프로세스 간 완전 독립되고, Data의 순서가 보장된다.
	- 단점: OS 커널을 거치므로 속도가 느리고, 큐의 용량 제한이 존재한다.

- 공유 메모리(Shared Memory): 여러 프로세스가 같은 메모리 영역을 공유하는 방식
    - 가장 빠른 IPC 방식
    - 동기화 필요 (mutex, semaphore 등)
    - 직접 메모리 접근 → 복사 없음
    - 장점: 속도 빠름, 대용량 데이터 처리 용이
    - 단점: 동기화 필수, 설계 복잡

소켓(Socket): 네트워크를 통해 데이터를 주고받는 IPC
    - 로컬, 원격 모두 통신 가능
    - TCP/UDP 기반
    - 클라이언트-서버 모델에 적합
    - 장점: 프로세스 위치와 무관, 네트워크 통신 가능
    - 단점: 상대적으로 느림, 설계 복잡

---

5. Context Switching이 프로세스보다 스레드에서 더 빠른 이유는?
스레드는 주소 공간을 공유하기 때문에 교체할 정보가 적어서 context switching이 더 빠르다.
프로세스 context switching: 주소 공간 변경, TLB flush가 가장 큰 비용을 발생시킨다.
스레드 context switching: 주소 공간, Page Table, Heap/Data/Text, TLB가 바뀌지 않아, 메모리 관련 작업을 거의 하지 않아 훨씬 가볍다.

---

## 📎 참고 자료
<!-- 공부하면서 참고한 링크를 여기에 추가해주세요 -->

---

## 💬 토론 포인트
<!-- PR 리뷰 또는 스터디 중 나온 추가 질문이나 논의 사항을 기록해주세요 -->
