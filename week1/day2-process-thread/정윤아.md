# Day 2: 프로세스와 스레드
> 📅 2025.02.14 | 📁 Week 1

---

## 🧠 학습 질문

- [x] 프로세스와 프로그램의 차이는?
- [x] 프로세스와 스레드의 차이를 메모리 구조 관점에서 설명하면?
- [x] 멀티 프로세스와 멀티 스레드의 장단점은? 어떤 경우에 무엇을 선택하는가?
- [x] 스레드가 스택을 독립적으로 가지는 이유는? 힙은 왜 공유하는가?
- [x] 프로세스 간 통신(IPC) 방법은? (파이프, 메시지 큐, 공유 메모리, 소켓)
- [x] Context Switching이 프로세스보다 스레드에서 더 빠른 이유는?

---

## Q1.프로세스와 프로그램의 차이는?

[답변]
* 프로세스: '실행 중'인 프로그램 인스턴스. 메모리에 올라와있고, CPU 스케줄링의 대상이 됨.
* 프로그램: '실행 가능한' 정적인 코드 집합. 디스크에 존재함.

---

## Q2. 프로세스와 스레드의 차이를 메모리 구조 관점에서 설명하면?

[답변]
* 프로세스: 개별 프로세스는 각자 독립된 메모리 공간을 가진다.
* 스레드: 프로세스 내의 실행 단위로, 같은 프로세스 내의 스레드들은 메모리 영역을 일부 공유한다.

[보완]
* 프로세스: 공유는 IPC로만
* 스레드
    - 공유: 코드(text), 전역/정적(data, vss), 힙(heap), 열린 파일/소켓 같은 프로세스 자원
    - 독립: 스택(stack), 레지스터(PC/SP 포함), TLS, 스케줄링을 위한 일부 스레드 상태(TCB 등)

[정리]
* 프로세스: 주소 공간 분리
* 스레드: 주소 공간 공유, 실행 컨텍스트 분리

---

## Q3. 멀티 프로세스와 멀티 스레드의 장단점은? 어떤 경우에 무엇을 선택하는가?

[답변]
* 멀티 프로세스
    - 장점
        - 강한 격리
        - 보안/권한 분리 용이
- 단점
    - IPC 필요
    - 메모리 사용량 증가
* 멀티 스레드
    - 장점
        - 메모리 공유 -> 데이터 전달 빠르고 단순
        - 상대적으로 스위칭/생성 비용이 적음
    - 단점
        - 데이터 레이스/데드락 등 동기화 이슈 발생 가능
        - 한 스레드의 오류가 프로세스 전체에 영향을 줄 수 있음

* 선택 기준
    - 안정성/격리/보안이 우선될 경우 -> 멀티 프로세스
    - 공유 데이터가 많고, 지연이 적어야 함 -> 멀티 스레드

[정리]
* 멀티 프로세스: 격리/안정성 ↑, IPC/메모리 비용 ↑
* 멀티 스레드: 공유/성능 ↑, 동기화 난이도·위험 ↑

---

## Q4. 스레드가 스택을 독립적으로 가지는 이유는? 힙은 왜 공유하는가?

[답변]
* 스택 독립
함수 호출 프레임(리턴 주소, 매개변수, 지역 변수)는 스레드별로 분리가 필요함. 각 스레드는 서로 실행 지점이 다르므로 콜스택을 독립적으로 가져야 함.
* 힙 공유
데이터 전달을 빠르게 하고, 동기화가 필요한 정보를 공유하기 위해서 힙을 공유함.

[정리]
* 스택은 실행 흐름(콜스택) 분리 때문에 독립
* 힙은 주소공간 공유로 인해 자연스럽게 공유되며 협업 데이터를 담는 공간이 됨

---

## Q5. 프로세스 간 통신(IPC) 방법은? (파이프, 메시지 큐, 공유 메모리, 소켓)

[답변]
* 파이프: 프로세스 간 바이트 스트림 전달
* 메시지 큐: 커널이 관리하는 큐. 메시지 단위로 송수신
* 공유 메모리: 서로 다른 프로세스가 같은 영역 매핑. 동기화 설계 필요
* 소켓: 네트워크 통신 가능

[보완]
* 파이프는 부모-자식 관계에서 많이 사용한다.
* 가장 빠른 IPC는 공유 메모리다.

---

## Q6. Context Switching이 프로세스보다 스레드에서 더 빠른 이유는?

[답변]
* 프로세스 전환
    - 가상 주소 공간 자체가 바뀌어, 페이지 테이블 전환, TLB 영향 등으로 추가 비용이 발생한다.
* 스레드 전환: 
    - 주소 공간이 동일하므로 페이지 테이블 전환 부담이 적음
    - 실행 컨텍스트 중심으로 저장 및 복원되어 더 가벼움

[보완]
* 가상 주소 공간: 각 프로세스가 자신만의 메모리를 가진 것처럼 보이게 하는 논리적 주소. 프로세스 간 격리 및 보호를 위해 필요
* 페이지 테이블: 가상 주소를 물리 주소로 바꾸기 위한 변환 표
* TLB: 자주 쓰는 가상->물리 변환 결과의 캐시

[정리]
* 스레드는 주소 공간을 유지한 채 실행
* 컨텍스트만 교체, 프로세스는 주소 공간까지 교체

---

## 📎 참고 자료
<!-- 공부하면서 참고한 링크를 여기에 추가해주세요 -->

---

## 💬 토론 포인트
<!-- PR 리뷰 또는 스터디 중 나온 추가 질문이나 논의 사항을 기록해주세요 -->
