# Day 11: 트랜잭션(Transaction)과 ACID
> 📅 2025.02.23 | 📁 Week 2
---
## 🧠 학습 질문
- [x] 트랜잭션이란 무엇이며 왜 필요한가?
- [x] ACID 속성(원자성, 일관성, 격리성, 지속성)을 각각 설명하면?
- [x] 트랜잭션 격리 수준(Read Uncommitted, Read Committed, Repeatable Read, Serializable)의 차이는?
- [x] Dirty Read, Non-Repeatable Read, Phantom Read란 무엇인가?
- [x] 각 격리 수준에서 어떤 문제가 발생하고 방지되는가?
- [x] 락(Lock)의 종류(공유 락, 배타 락)와 역할은?
- [x] 2PL(Two-Phase Locking) 프로토콜이란?
---
## 1. 트랜잭션이란 무엇이며 왜 필요한가?

**논리적 작업 단위와 데이터 무결성**
- 데이터베이스의 상태를 변화시키는 하나의 논리적인 작업 단위를 의미한다.
- 데이터베이스의 무결성을 유지하기 위해 필요하다. 여러 개의 연산이 하나의 작업으로 묶여, 모든 연산이 성공적으로 완료되거나 아니면 아예 실행되지 않은 상태(Rollback)로 되돌려짐으로써 데이터의 일관성을 보장한다.

---

## 2. ACID 속성(원자성, 일관성, 격리성, 지속성)을 각각 설명하면?

- **원자성 (Atomicity):** 트랜잭션과 관련된 작업은 모두 수행되거나, 아니면 하나도 수행되지 않아야 한다.
- **일관성 (Consistency):** 트랜잭션이 성공적으로 완료되면 언제나 일관성 있는 데이터베이스 상태를 유지해야 한다.
- **격리성 (Isolation):** 둘 이상의 트랜잭션이 동시에 실행될 때, 서로의 연산에 끼어들지 못하도록 독립성을 보장한다.
- **지속성 (Durability):** 성공적으로 완료된 트랜잭션의 결과는 시스템에 장애가 발생하더라도 영구적으로 반영되어야 한다.

---

## 3. 트랜잭션 격리 수준(Read Uncommitted, Read Committed, Repeatable Read, Serializable)의 차이는?

- **Read Uncommitted:** 커밋되지 않은 데이터도 읽을 수 있는 가장 낮은 격리 수준이다.
- **Read Committed:** 커밋된 데이터만 읽을 수 있으며, 대부분의 RDBMS에서 기본으로 사용하는 수준이다.
- **Repeatable Read:** 트랜잭션 내에서 한 번 조회한 데이터를 반복해서 조회해도 같은 결과가 나오도록 보장한다.
- **Serializable:** 가장 높은 격리 수준으로, 트랜잭션을 순차적으로 진행시켜 동시성 문제를 완전히 차단한다.

---

## 4. Dirty Read, Non-Repeatable Read, Phantom Read란 무엇인가?

- **Dirty Read:** 다른 트랜잭션이 커밋하지 않은 데이터를 읽어 발생하는 문제다. 해당 트랜잭션이 롤백될 경우 잘못된 데이터를 읽은 것이 된다.
- **Non-Repeatable Read:** 한 트랜잭션 내에서 같은 데이터를 두 번 조회했을 때, 그 사이 다른 트랜잭션이 데이터를 수정/삭제하여 결과가 다르게 나타나는 현상이다.
- **Phantom Read:** 한 트랜잭션 내에서 일정 범위의 데이터를 두 번 조회했을 때, 그 사이 다른 트랜잭션이 데이터를 삽입하여 첫 번째 조회 시 없던 유령(Phantom) 레코드가 나타나는 현상이다.

---

## 5. 각 격리 수준에서 어떤 문제가 발생하고 방지되는가?

- **Read Uncommitted:** Dirty Read, Non-Repeatable Read, Phantom Read가 모두 발생할 수 있다.
- **Read Committed:** Dirty Read는 방지되지만, Non-Repeatable Read와 Phantom Read는 발생할 수 있다.
- **Repeatable Read:** Dirty Read와 Non-Repeatable Read는 방지되지만, Phantom Read는 발생할 수 있다. (단, InnoDB 등 일부 엔진은 방지하기도 한다.)
- **Serializable:** 모든 읽기 문제가 발생하지 않도록 완벽히 방지한다.

---

## 6. 락(Lock)의 종류(공유 락, 배타 락)와 역할은?

- **공유 락 (Shared Lock, S-Lock):** 데이터를 읽을 때 사용하는 락이다. 여러 트랜잭션이 동시에 같은 데이터에 대해 공유 락을 걸 수 있지만, 이 상태에서는 누구도 데이터를 수정할 수 없다.
- **배타 락 (Exclusive Lock, X-Lock):** 데이터를 수정할 때 사용하는 락이다. 배타 락이 걸린 데이터는 다른 트랜잭션이 읽거나 수정할 수 없도록 독점적인 권한을 갖는다.

---

## 7. 2PL(Two-Phase Locking) 프로토콜이란?

**직렬 가능성을 보장하기 위한 잠금 규약**
- 모든 트랜잭션의 락 획득과 해제 시점을 두 단계로 나누어 관리하는 방식이다.
- **확장 단계 (Growing Phase):** 트랜잭션이 락을 획득할 수만 있고, 해제할 수는 없는 단계다.
- **수축 단계 (Shrinking Phase):** 트랜잭션이 락을 해제할 수만 있고, 새로운 락을 획득할 수는 없는 단계다.
- 이를 통해 트랜잭션의 원자성과 격리성을 높이고 데이터의 일관성을 유지한다.

## 📎 참고 자료
<!-- 공부하면서 참고한 링크를 여기에 추가해주세요 -->
---
## 💬 토론 포인트
<!-- PR 리뷰 또는 스터디 중 나온 추가 질문이나 논의 사항을 기록해주세요 -->
