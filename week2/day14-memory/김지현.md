# Day 14: λ©”λ¨λ¦¬ κ΄€λ¦¬ (νμ΄μ§•, μ„Έκ·Έλ¨Όν…μ΄μ…)

> π“… 2025.02.26 | π“ Week 2

---

## π§  ν•™μµ μ§λ¬Έ

-   [ ] λ©”λ¨λ¦¬ λ‹¨νΈν™”λ” μ™ λ°μƒν•λ”κ°€?
-   [ ] λ‚΄λ¶€ λ‹¨νΈν™”μ™€ μ™Έλ¶€ λ‹¨νΈν™”μ μ°¨μ΄λ”? κ°κ° μ–΄λ–¤ κ²½μ°μ— λ°μƒν•λ”κ°€?
-   [ ] νμ΄μ§•μ΄λ€ λ¬΄μ—‡μ΄λ©° μ™ μ‚¬μ©ν•λ”κ°€? λ‹¨νΈν™” λ¬Έμ λ¥Ό μ–΄λ–»κ² ν•΄κ²°ν•λ”κ°€?
-   [ ] νμ΄μ§€ ν…μ΄λΈ”μ€ μ–΄λ–»κ² λ™μ‘ν•λ”κ°€? μ£Όμ† λ³€ν™ κ³Όμ •μ€?
-   [ ] μ„Έκ·Έλ¨Όν…μ΄μ…κ³Ό νμ΄μ§•μ μ°¨μ΄λ”? κ°κ°μ μ¥λ‹¨μ μ€?
-   [ ] νμ΄μ§€ ν¬κΈ°κ°€ μ„±λ¥μ— λ―ΈμΉλ” μν–¥μ€? ν¬λ©΄/μ‘μΌλ©΄ μ–΄λ–¤ λ¬Έμ κ°€ μλ”κ°€?

# λ©”λ¨λ¦¬ κ΄€λ¦¬ μ •λ¦¬

---

## 1. λ©”λ¨λ¦¬ λ‹¨νΈν™”λ” μ™ λ°μƒν•λ”κ°€?

λ©”λ¨λ¦¬ λ‹¨νΈν™”(Fragmentation)λ” **λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ήκ³Ό ν•΄μ  κ³Όμ •μ—μ„ λ©”λ¨λ¦¬ κ³µκ°„μ΄ λΉ„μ—°μ†μ μΌλ΅ μΌκ°μ§€κΈ° λ•λ¬Έμ— λ°μƒ**ν•λ‹¤.

μ΄μμ²΄μ λ” ν”„λ΅μ„Έμ¤μ μƒμ„±κ³Ό μΆ…λ£μ— λ”°λΌ λ©”λ¨λ¦¬λ¥Ό:

-   ν• λ‹Ή(allocate)
-   νμ(deallocate)

μ΄ κ³Όμ •μ„ λ°λ³µν•λ‹¤.

κ·Έ κ²°κ³Ό:

-   μ‚¬μ© κ°€λ¥ν• μ΄ λ©”λ¨λ¦¬λ” μ¶©λ¶„ν•μ§€λ§
-   **μ—°μ†λ(contiguous) κ³µκ°„μ΄ λ¶€μ΅±ν• μƒνƒ**κ°€ λ°μƒν•λ‹¤.

μ¦‰, **κ³µκ°„μ€ μμ§€λ§ λ¶™μ–΄μμ§€ μ•μ•„μ„ λ» μ“°λ” μƒν™©**μ΄ λ‹¨νΈν™”λ‹¤.

---

## 2. λ‚΄λ¶€ λ‹¨νΈν™” vs μ™Έλ¶€ λ‹¨νΈν™”

### 2.1 λ‚΄λ¶€ λ‹¨νΈν™” (Internal Fragmentation)

**ν• λ‹Ήλ λ©”λ¨λ¦¬ λΈ”λ΅ λ‚΄λ¶€μ—μ„ λ‚­λΉ„λλ” κ³µκ°„**

### λ°μƒ μƒν™©

-   κ³ μ • ν¬κΈ° ν• λ‹Ή (fixed-size allocation)
-   νμ΄μ§•μ—μ„ page ν¬κΈ°λ³΄λ‹¤ μ‘μ€ λ°μ΄ν„°κ°€ λ“¤μ–΄κ° λ•

### μμ‹

-   Page size = 4KB
-   μ‹¤μ  μ”μ²­ = 3KB
-   λ‚¨λ” 1KBλ” μ‚¬μ© λ¶κ°€ β†’ λ‚΄λ¶€ λ‹¨νΈν™”

### νΉμ§•

-   λΈ”λ΅ λ‚΄λ¶€μ λ‚­λΉ„
-   κ³µκ°„μ€ ν• λ‹Ήλμ—μ§€λ§ μΌλ¶€ λ―Έμ‚¬μ©

---

### 2.2 μ™Έλ¶€ λ‹¨νΈν™” (External Fragmentation)

**ν• λ‹Ήκ³Ό ν•΄μ λ¥Ό λ°λ³µν•λ©΄μ„ μƒκΈ΄ β€λΉ„μ—°μ†μ  λΉ κ³µκ°„β€**

### λ°μƒ μƒν™©

-   κ°€λ³€ ν¬κΈ° λ©”λ¨λ¦¬ ν• λ‹Ή (variable-size allocation)
-   μ—°μ† λ©”λ¨λ¦¬ ν• λ‹Ή λ°©μ‹ (contiguous allocation)

### μμ‹

```
[ν”„λ΅μ„Έμ¤ A][λΉκ³µκ°„][ν”„λ΅μ„Έμ¤ B][λΉκ³µκ°„][ν”„λ΅μ„Έμ¤ C]
```

μ΄ λΉ κ³µκ°„μ€ μ¶©λ¶„ν•μ§€λ§,
μ—°μ†λ ν° κ³µκ°„μ΄ μ—†μ β†’ μƒλ΅μ΄ ν”„λ΅μ„Έμ¤ μ μ¬ λ¶κ°€

### νΉμ§•

-   λΈ”λ΅ μ‚¬μ΄μ λ‚­λΉ„
-   μ—°μ† κ³µκ°„ λ¶€μ΅± λ¬Έμ 

---

## 3. νμ΄μ§•(Paging)μ΄λ€? μ™ μ‚¬μ©ν•λ”κ°€?

### μ •μ

νμ΄μ§•μ€ **λ…Όλ¦¬ μ£Όμ† κ³µκ°„μ„ κ³ μ • ν¬κΈ°(Page)λ΅ λ‚λ„κ³ **,
λ¬Όλ¦¬ λ©”λ¨λ¦¬λ„ λ™μΌ ν¬κΈ°(Frame)λ΅ λ‚λ„μ–΄ λ§¤ν•‘ν•λ” λ°©μ‹μ΄λ‹¤.

### λ©μ 

-   μ™Έλ¶€ λ‹¨νΈν™” μ κ±°
-   λΉ„μ—°μ† λ©”λ¨λ¦¬ ν• λ‹Ή κ°€λ¥

---

### λ‹¨νΈν™” ν•΄κ²° λ°©μ‹

#### μ™Έλ¶€ λ‹¨νΈν™”

-   ν”„λ΅μ„Έμ¤λ¥Ό μ—°μ† κ³µκ°„μ— λ„£μ„ ν•„μ” μ—†μ
-   κ° νμ΄μ§€λ¥Ό μ•„λ¬΄ frameμ—λ‚ λ°°μΉ κ°€λ¥
-   β†’ μ™Έλ¶€ λ‹¨νΈν™” μ κ±°

#### λ‚΄λ¶€ λ‹¨νΈν™”

-   λ§μ§€λ§‰ νμ΄μ§€μ—μ„ μΌλ¶€ κ³µκ°„μ΄ λ‚¨μ„ μ μμ
-   β†’ λ‚΄λ¶€ λ‹¨νΈν™”λ” μ΅΄μ¬

μ¦‰,

-   νμ΄μ§• = μ™Έλ¶€ λ‹¨νΈν™” ν•΄κ²°
-   λ‚΄λ¶€ λ‹¨νΈν™”λ” λ‚¨μ

---

## 4. νμ΄μ§€ ν…μ΄λΈ”κ³Ό μ£Όμ† λ³€ν™ κ³Όμ •

### 4.1 λ…Όλ¦¬ μ£Όμ† κµ¬μ΅°

λ…Όλ¦¬ μ£Όμ†(Logical Address) =

```
[ page number | offset ]
```

-   page number: μ–΄λ–¤ νμ΄μ§€μΈκ°€
-   offset: νμ΄μ§€ λ‚΄λ¶€ μ„μΉ

---

### 4.2 μ£Όμ† λ³€ν™ κ³Όμ •

1. CPUκ°€ λ…Όλ¦¬ μ£Όμ† μƒμ„±
2. page number μ¶”μ¶
3. νμ΄μ§€ ν…μ΄λΈ”μ—μ„ ν•΄λ‹Ή pageμ frame λ²νΈ μ΅°ν
4. λ¬Όλ¦¬ μ£Όμ† μƒμ„±:

```
Physical Address = frame number + offset
```

---

### 4.3 νμ΄μ§€ ν…μ΄λΈ”μ μ—­ν• 

-   page number β†’ frame number λ§¤ν•‘
-   κ° μ—”νΈλ¦¬λ” λ³΄ν†µ:

    -   frame number
    -   valid bit
    -   protection bit
    -   dirty bit λ“± ν¬ν•¨

---

### 4.4 TLB (Translation Lookaside Buffer)

μ£Όμ† λ³€ν™μ€ λ§¤λ² λ©”λ¨λ¦¬ μ ‘κ·Όμ΄ ν•„μ”ν•λ―€λ΅ λλ¦¬λ‹¤.
μ΄λ¥Ό μµμ ν™”ν•κΈ° μ„ν•΄:

-   μµκ·Ό μ‚¬μ©λ page-table entryλ¥Ό μΊμ‹±ν•λ” ν•λ“μ›¨μ–΄ μΊμ‹
-   TLB hit μ‹ λ°”λ΅ λ³€ν™

---

## 5. μ„Έκ·Έλ¨Όν…μ΄μ… vs νμ΄μ§•

### 5.1 μ„Έκ·Έλ¨Όν…μ΄μ… (Segmentation)

ν”„λ΅κ·Έλ¨μ„ **μλ―Έ λ‹¨μ„(segment)**λ΅ λ‚λ„λ” λ°©μ‹

μ:

-   code segment
-   data segment
-   stack segment

λ…Όλ¦¬ μ£Όμ†:

```
[ segment number | offset ]
```

κ° segmentλ” κ°€λ³€ ν¬κΈ°

---

### 5.2 μ°¨μ΄ λΉ„κµ

| ν•­λ©        | νμ΄μ§•    | μ„Έκ·Έλ¨Όν…μ΄μ…     |
| ----------- | --------- | ---------------- |
| λ¶„ν•  κΈ°μ¤€   | κ³ μ • ν¬κΈ° | κ°€λ³€ ν¬κΈ°        |
| μ‚¬μ©μ κ΄€μ  | λΉ„κ°€μ‹μ   | λ…Όλ¦¬μ  κµ¬μ΅° λ°μ |
| μ™Έλ¶€ λ‹¨νΈν™” | μ—†μ      | λ°μƒ             |
| λ‚΄λ¶€ λ‹¨νΈν™” | μμ      | μ—†μ             |
| κ΄€λ¦¬ λ³µμ΅λ„ | λ‹¨μ      | μƒλ€μ μΌλ΅ λ³µμ΅  |

---

### 5.3 μ¥λ‹¨μ 

#### νμ΄μ§•

μ¥μ 

-   μ™Έλ¶€ λ‹¨νΈν™” μ—†μ
-   κµ¬ν„ λ‹¨μ
-   κ°€μƒ λ©”λ¨λ¦¬μ™€ κ²°ν•© μ©μ΄

λ‹¨μ 

-   λ‚΄λ¶€ λ‹¨νΈν™” λ°μƒ
-   νμ΄μ§€ ν…μ΄λΈ” μ¤λ²„ν—¤λ“

---

#### μ„Έκ·Έλ¨Όν…μ΄μ…

μ¥μ 

-   ν”„λ΅κ·Έλ¨ λ…Όλ¦¬ κµ¬μ΅° λ°μ
-   λ³΄νΈ λ° κ³µμ  μ©μ΄

λ‹¨μ 

-   μ™Έλ¶€ λ‹¨νΈν™” λ°μƒ
-   λ©”λ¨λ¦¬ κ΄€λ¦¬ λ³µμ΅

---

## 6. νμ΄μ§€ ν¬κΈ°κ°€ μ„±λ¥μ— λ―ΈμΉλ” μν–¥

νμ΄μ§€ ν¬κΈ°λ” λ§¤μ° μ¤‘μ”ν• μ„¤κ³„ μ”μ†λ‹¤.

---

### 6.1 νμ΄μ§€κ°€ ν΄ κ²½μ°

μ¥μ 

-   νμ΄μ§€ ν…μ΄λΈ” ν¬κΈ° κ°μ†
-   TLB miss κ°μ† κ°€λ¥
-   I/O ν¨μ¨ μ¦κ°€ (ν• λ²μ— λ§μ΄ μ½μ)

λ‹¨μ 

-   λ‚΄λ¶€ λ‹¨νΈν™” μ¦κ°€
-   λ¶ν•„μ”ν• λ°μ΄ν„° λ΅λ”©
-   cache pollution κ°€λ¥μ„±

---

### 6.2 νμ΄μ§€κ°€ μ‘μ„ κ²½μ°

μ¥μ 

-   λ‚΄λ¶€ λ‹¨νΈν™” κ°μ†
-   λ©”λ¨λ¦¬ ν™μ© ν¨μ¨ μ¦κ°€
-   locality ν™μ© κ°€λ¥

λ‹¨μ 

-   νμ΄μ§€ ν…μ΄λΈ” μ»¤μ§
-   TLB miss μ¦κ°€
-   μ£Όμ† λ³€ν™ μ¤λ²„ν—¤λ“ μ¦κ°€

---

## π“ μ°Έκ³  μλ£

## <!-- κ³µλ¶€ν•λ©΄μ„ μ°Έκ³ ν• λ§ν¬λ¥Ό μ—¬κΈ°μ— μ¶”κ°€ν•΄μ£Όμ„Έμ” -->

## π’¬ ν† λ΅  ν¬μΈνΈ

<!-- PR λ¦¬λ·° λλ” μ¤ν„°λ”” μ¤‘ λ‚μ¨ μ¶”κ°€ μ§λ¬Έμ΄λ‚ λ…Όμ μ‚¬ν•­μ„ κΈ°λ΅ν•΄μ£Όμ„Έμ” -->
