# Day 14: λ©”λ¨λ¦¬ κ΄€λ¦¬ (νμ΄μ§•, μ„Έκ·Έλ¨Όν…μ΄μ…)
> π“… 2025.02.26 | π“ Week 2
---
## π§  ν•™μµ μ§λ¬Έ
- [x] λ©”λ¨λ¦¬ λ‹¨νΈν™”λ” μ™ λ°μƒν•λ”κ°€?
- [x] λ‚΄λ¶€ λ‹¨νΈν™”μ™€ μ™Έλ¶€ λ‹¨νΈν™”μ μ°¨μ΄λ”? κ°κ° μ–΄λ–¤ κ²½μ°μ— λ°μƒν•λ”κ°€?
- [x] νμ΄μ§•μ΄λ€ λ¬΄μ—‡μ΄λ©° μ™ μ‚¬μ©ν•λ”κ°€? λ‹¨νΈν™” λ¬Έμ λ¥Ό μ–΄λ–»κ² ν•΄κ²°ν•λ”κ°€?
- [x] νμ΄μ§€ ν…μ΄λΈ”μ€ μ–΄λ–»κ² λ™μ‘ν•λ”κ°€? μ£Όμ† λ³€ν™ κ³Όμ •μ€?
- [x] μ„Έκ·Έλ¨Όν…μ΄μ…κ³Ό νμ΄μ§•μ μ°¨μ΄λ”? κ°κ°μ μ¥λ‹¨μ μ€?
- [x] νμ΄μ§€ ν¬κΈ°κ°€ μ„±λ¥μ— λ―ΈμΉλ” μν–¥μ€? ν¬λ©΄/μ‘μΌλ©΄ μ–΄λ–¤ λ¬Έμ κ°€ μλ”κ°€?
---
## 1. λ©”λ¨λ¦¬ λ‹¨νΈν™”λ” μ™ λ°μƒν•λ”κ°€?

λ©”λ¨λ¦¬ λ‹¨νΈν™”(Fragmentation)λ” **μ—°μ†λ λ¬Όλ¦¬ λ©”λ¨λ¦¬ κ³µκ°„μ„ ν¨μ¨μ μΌλ΅ μ‚¬μ©ν•μ§€ λ»ν•  λ•** λ°μƒν•λ‹¤.

κ·Όλ³Έ μ›μΈ:

* ν”„λ΅μ„Έμ¤μ **λ™μ  ν• λ‹Ή/ν•΄μ  λ°λ³µ**
* κ°€λ³€ ν¬κΈ° λ©”λ¨λ¦¬ μ”μ²­
* μ—°μ† λ©”λ¨λ¦¬ ν• λ‹Ή λ°©μ‹ μ‚¬μ©

μ:

```
[ A 20MB ][ B 30MB ][ C 10MB ]
B μΆ…λ£ β†’ μ¤‘κ°„ 30MB λΉ κ³µκ°„ μƒμ„±
```

μ΄ν›„ 25MB μ”μ²­ β†’ λ“¤μ–΄κ° μ μμ
ν•μ§€λ§ 35MB μ”μ²­ β†’ μ΄ μ—¬μ  λ©”λ¨λ¦¬λ” μ¶©λ¶„ν•΄λ„ β€μ—°μ†λ κ³µκ°„β€μ΄ μ—†μ–΄ μ‹¤ν¨

μ¦‰, **μ΄ μ©λ‰μ΄ μ•„λ‹λΌ β€μ—°μ†μ„±β€ λ¬Έμ **λ‹¤.

---

## 2. λ‚΄λ¶€ λ‹¨νΈν™” vs μ™Έλ¶€ λ‹¨νΈν™”

### β‘  λ‚΄λ¶€ λ‹¨νΈν™” (Internal Fragmentation)

> ν• λ‹Ήλ λΈ”λ΅ λ‚΄λ¶€μ—μ„ μ‚¬μ©λμ§€ μ•λ” κ³µκ°„

λ°μƒ μ΅°κ±΄:

* **κ³ μ • ν¬κΈ° λΈ”λ΅ ν• λ‹Ή**
* νμ΄μ§• μ‹μ¤ν…

μ:

* νμ΄μ§€ ν¬κΈ° 4KB
* μ‹¤μ  μ”μ²­ 3KB
* 1KB λ‚­λΉ„ β†’ λ‚΄λ¶€ λ‹¨νΈν™”

νΉμ§•:

* λΈ”λ΅ λ‚΄λ¶€μ— λ‚¨λ” κ³µκ°„
* ν•΄κ²°μ΄ μ–΄λ µμ§€λ§ κ΄€λ¦¬κ°€ λ‹¨μ

---

### β‘΅ μ™Έλ¶€ λ‹¨νΈν™” (External Fragmentation)

> μ΄ λ©”λ¨λ¦¬λ” μ¶©λ¶„ν•μ§€λ§, μ—°μ†λ κ³µκ°„μ΄ μ—†μ–΄ ν• λ‹Ή λ¶κ°€

λ°μƒ μ΅°κ±΄:

* **κ°€λ³€ ν¬κΈ° μ—°μ† ν• λ‹Ή λ°©μ‹**
* μ„Έκ·Έλ¨Όν…μ΄μ…
* First-fit, Best-fit λ“± μ‚¬μ© μ‹

μ:

```
[10MB][5MB][8MB][12MB]
μ¤‘κ°„μ¤‘κ°„ λΉ„μ–΄μμ§€λ§ ν° μ”μ²­μ€ λ¶κ°€
```

νΉμ§•:

* λ©”λ¨λ¦¬ λ°”κΉ¥μ— ν©μ–΄μ§„ λΉ κ³µκ°„
* Compaction(μ¬λ°°μΉ) ν•„μ”

---

## 3. νμ΄μ§•(Paging)μ΄λ€ λ¬΄μ—‡μΈκ°€?

### μ •μ

> κ°€μƒ λ©”λ¨λ¦¬λ¥Ό **κ³ μ • ν¬κΈ° λΈ”λ΅(νμ΄μ§€)** μΌλ΅ λ‚λ„μ–΄ κ΄€λ¦¬ν•λ” λ°©μ‹

* κ°€μƒ λ©”λ¨λ¦¬ β†’ νμ΄μ§€
* λ¬Όλ¦¬ λ©”λ¨λ¦¬ β†’ ν”„λ μ„

### μ™ μ‚¬μ©ν•λ”κ°€?

λ©μ :

1. μ™Έλ¶€ λ‹¨νΈν™” μ κ±°
2. ν”„λ΅μ„Έμ¤ μ—°μ†μ„± μ”κµ¬ μ κ±°
3. κ°€μƒ λ©”λ¨λ¦¬ κµ¬ν„ κ°€λ¥

### λ‹¨νΈν™” ν•΄κ²° λ°©μ‹

* λ¨λ“  νμ΄μ§€ ν¬κΈ° λ™μΌ
* λ¬Όλ¦¬ λ©”λ¨λ¦¬ μ–΄λ””λ“  λ°°μΉ κ°€λ¥
  β†’ μ—°μ†μ„± ν•„μ” μ—†μ
  β†’ μ™Έλ¶€ λ‹¨νΈν™” μ κ±°

λ‹¨, λ‚΄λ¶€ λ‹¨νΈν™”λ” λ‚¨λ”λ‹¤.

---

## 4. νμ΄μ§€ ν…μ΄λΈ”κ³Ό μ£Όμ† λ³€ν™ κ³Όμ •

### κ°€μƒ μ£Όμ† κµ¬μ΅°

```
[ νμ΄μ§€ λ²νΈ | μ¤ν”„μ…‹ ]
```

μ:

* 32λΉ„νΈ μ£Όμ†
* νμ΄μ§€ ν¬κΈ° 4KB β†’ 12λΉ„νΈ offset
* μƒμ„ 20λΉ„νΈ = νμ΄μ§€ λ²νΈ

---

### μ£Όμ† λ³€ν™ κ³Όμ •

1. CPUκ°€ κ°€μƒ μ£Όμ† μƒμ„±
2. νμ΄μ§€ λ²νΈ μ¶”μ¶
3. νμ΄μ§€ ν…μ΄λΈ” μ ‘κ·Ό
4. λ€μ‘λλ” λ¬Όλ¦¬ ν”„λ μ„ λ²νΈ νλ“
5. λ¬Όλ¦¬ μ£Όμ† = ν”„λ μ„ λ²νΈ + μ¤ν”„μ…‹

κ³µμ‹:

```
Physical Address = Frame Number || Offset
```

λ¬Έμ :

* λ§¤λ² λ©”λ¨λ¦¬ μ ‘κ·Ό 2λ² ν•„μ”
  β†’ TLB(Translation Lookaside Buffer) μ‚¬μ©

---

## 5. μ„Έκ·Έλ¨Όν…μ΄μ… vs νμ΄μ§•

| κµ¬λ¶„     | μ„Έκ·Έλ¨Όν…μ΄μ…                 | νμ΄μ§•      |
| ------ | ---------------------- | -------- |
| λ¶„ν•  κΈ°μ¤€  | λ…Όλ¦¬μ  λ‹¨μ„ (code, stack λ“±) | κ³ μ • ν¬κΈ°    |
| ν¬κΈ°     | κ°€λ³€                     | κ³ μ •       |
| μ™Έλ¶€ λ‹¨νΈν™” | λ°μƒ                     | μ—†μ       |
| λ‚΄λ¶€ λ‹¨νΈν™” | μ—†μ                     | λ°μƒ       |
| λ³΄νΈ/κ³µμ   | μμ—°μ¤λ¬μ›€                  | μƒλ€μ μΌλ΅ λ³µμ΅ |

---

### μ„Έκ·Έλ¨Όν…μ΄μ…

κ°€μƒ μ£Όμ†:

```
[ μ„Έκ·Έλ¨ΌνΈ λ²νΈ | μ¤ν”„μ…‹ ]
```

μ¥μ :

* ν”„λ΅κ·Έλ¨ κµ¬μ΅° λ°μ
* κ¶ν• κ΄€λ¦¬ μ©μ΄

λ‹¨μ :

* μ™Έλ¶€ λ‹¨νΈν™” λ°μƒ
* compaction ν•„μ”

---

### νμ΄μ§•

μ¥μ :

* μ™Έλ¶€ λ‹¨νΈν™” μ κ±°
* κµ¬ν„ λ‹¨μ

λ‹¨μ :

* λ‚΄λ¶€ λ‹¨νΈν™”
* νμ΄μ§€ ν…μ΄λΈ” μ¤λ²„ν—¤λ“

---

## 6. νμ΄μ§€ ν¬κΈ°κ°€ μ„±λ¥μ— λ―ΈμΉλ” μν–¥

### νμ΄μ§€κ°€ ν΄ κ²½μ°

μ¥μ :

* νμ΄μ§€ ν…μ΄λΈ” μ‘μ•„μ§
* TLB hit ν™•λ¥  μ¦κ°€
* I/O ν¨μ¨μ 

λ‹¨μ :

* λ‚΄λ¶€ λ‹¨νΈν™” μ¦κ°€
* μΊμ‹ λ‚­λΉ„
* μ‘μ€ ν”„λ΅μ„Έμ¤μ— λΉ„ν¨μ¨

---

### νμ΄μ§€κ°€ μ‘μ„ κ²½μ°

μ¥μ :

* λ‚΄λ¶€ λ‹¨νΈν™” κ°μ†
* λ©”λ¨λ¦¬ ν™μ©λ„ μ¦κ°€

λ‹¨μ :

* νμ΄μ§€ ν…μ΄λΈ” μ»¤μ§
* TLB miss μ¦κ°€
* μ£Όμ† λ³€ν™ λΉ„μ© μ¦κ°€

---

### κ²°λ΅ 

ν„λ€ OSλ” νƒ€ν‘μ• μ‚¬μ©:

* κΈ°λ³Έ 4KB νμ΄μ§€
* Huge Page (2MB, 1GB) λ³‘ν–‰ μ‚¬μ©
* TLB μµμ ν™”

---



## π“ μ°Έκ³  μλ£
<!-- κ³µλ¶€ν•λ©΄μ„ μ°Έκ³ ν• λ§ν¬λ¥Ό μ—¬κΈ°μ— μ¶”κ°€ν•΄μ£Όμ„Έμ” -->
---
## π’¬ ν† λ΅  ν¬μΈνΈ
<!-- PR λ¦¬λ·° λλ” μ¤ν„°λ”” μ¤‘ λ‚μ¨ μ¶”κ°€ μ§λ¬Έμ΄λ‚ λ…Όμ μ‚¬ν•­μ„ κΈ°λ΅ν•΄μ£Όμ„Έμ” -->
