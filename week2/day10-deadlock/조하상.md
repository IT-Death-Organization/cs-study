# Day 10: 동기화와 교착상태(Deadlock)
> 📅 2025.02.22 | 📁 Week 2
---
## 🧠 학습 질문
- [x] 경쟁 상태(Race Condition)는 왜 발생하는가?
- [x] 임계 영역(Critical Section) 문제의 세 가지 조건은?
- [x] Mutex와 Semaphore의 차이는? 각각 언제 사용하는가?
- [x] Binary Semaphore와 Mutex의 차이는?
- [x] Counting Semaphore는 언제 사용하는가?
- [x] 교착상태의 4가지 필요조건은?
- [x] 교착상태 해결 방법(예방, 회피, 탐지, 복구)의 차이는?
- [x] Banker's Algorithm은 어떻게 동작하는가?
---
## 1. 경쟁 상태(Race Condition)는 왜 발생하는가?

**공유 자원과 비결정적 실행 순서**
- 여러 프로세스나 스레드가 동일한 공유 자원에 동시에 접근하여 조작할 때 발생한다.
- 실행 결과가 접근이 발생한 특정 순서에 의존하기 때문에 발생하며, 연산이 원자적(Atomic)으로 이루어지지 않아 데이터의 일관성이 깨지는 현상을 말한다.

---

## 2. 임계 영역(Critical Section) 문제의 세 가지 조건은?

임계 영역 문제를 해결하기 위해서는 다음의 세 가지 조건을 반드시 만족해야 한다.
- **상호 배제(Mutual Exclusion):** 한 프로세스가 임계 영역에서 실행 중이면 다른 프로세스는 그 영역에 들어갈 수 없다.
- **진행(Progress):** 임계 영역에 실행 중인 프로세스가 없고 들어가려는 프로세스가 있다면, 어떤 프로세스가 들어갈지 결정하는 것이 무한정 지연되어서는 안 된다.
- **한정된 대기(Bounded Waiting):** 프로세스가 임계 영역 진입을 요청한 후부터 그 요청이 허용될 때까지 다른 프로세스들이 임계 영역에 진입하는 횟수에는 제한이 있어야 한다. (기아 상태 방지)

---

## 3. Mutex와 Semaphore의 차이는? 각각 언제 사용하는가?

**Mutex (Mutual Exclusion)**
- **특징:** 오직 하나의 스레드만 공유 자원에 접근할 수 있게 하는 상호 배제 기법이다. 자원을 소유한 스레드만이 그 자원을 해제(Unlock)할 수 있다.
- **사용 상황:** 단일 공유 자원을 보호해야 할 때 사용한다.

**Semaphore**
- **특징:** 정수 값을 사용하여 여러 프로세스/스레드가 공유 자원에 접근하는 것을 제어하는 신호(Signaling) 메커니즘이다. 자원을 소유하지 않은 프로세스도 신호를 보낼 수 있다.
- **사용 상황:** 자원의 개수가 여러 개일 때, 혹은 실행 순서를 제어해야 할 때 사용한다.

---

## 4. Binary Semaphore와 Mutex의 차이는?

둘 다 0과 1의 상태를 가지지만 철학적인 차이가 존재한다.
- **소유권(Ownership):** Mutex는 자원을 점유한 스레드가 'Lock'을 소유하며 해제도 직접 해야 하지만, Binary Semaphore는 소유권이 없어 어떤 스레드라도 신호를 보내 상태를 바꿀 수 있다.
- **우선순위 상속(Priority Inheritance):** Mutex는 우선순위 역전 문제를 해결하기 위해 우선순위 상속 메커니즘을 지원하는 경우가 많으나, Semaphore는 일반적으로 이를 지원하지 않는다.

---

## 5. Counting Semaphore는 언제 사용하는가?

**유한한 자원 관리**
- 가용 자원의 개수가 여러 개일 때 이를 관리하기 위해 사용한다. (예: DB 커넥션 풀, 프린터 제한 등)
- 세마포어의 값을 자원의 개수로 초기화한 후, 자원을 사용할 때마다 값을 감소시키고 반납할 때 증가시키는 방식으로 동작하며 값이 0이 되면 자원이 생길 때까지 대기한다.

---

## 6. 교착상태의 4가지 필요조건은?

교착상태는 다음 네 가지 조건이 동시에 만족될 때 발생한다.
- **상호 배제(Mutual Exclusion):** 자원은 한 번에 한 프로세스만 사용할 수 있다.
- **점유와 대기(Hold and Wait):** 자원을 가진 상태에서 다른 자원을 기다린다.
- **비선점(No Preemption):** 다른 프로세스가 사용 중인 자원을 강제로 뺏을 수 없다.
- **순환 대기(Circular Wait):** 프로세스 간의 자원 요청 관계가 원형을 이룬다.



---

## 7. 교착상태 해결 방법(예방, 회피, 탐지, 복구)의 차이는?

- **예방(Prevention):** 교착상태의 4가지 조건 중 하나를 사전에 부정하여 발생 가능성을 차단한다. (자원 효율성 저하 위험)
- **회피(Avoidance):** 자원 할당 시 교착상태가 발생할 가능성이 있는지 동적으로 검사하여 안전한 경우에만 할당한다. (예: 은행원 알고리즘)
- **탐지(Detection):** 교착상태 발생을 허용하되, 주기적으로 시스템을 검사하여 교착상태가 발생했는지 찾아낸다.
- **복구(Recovery):** 교착상태가 탐지되면 프로세스를 종료하거나 자원을 강제로 뺏어 시스템을 정상화한다.

---

## 8. Banker's Algorithm은 어떻게 동작하는가?

**안전 상태(Safe State) 확인**
- 프로세스가 자원을 요청할 때, 시스템이 그 자원을 할당해 주어도 여전히 모든 프로세스가 완료될 수 있는 '안전 순서(Safe Sequence)'가 존재하는지 검사한다.
- 자원을 할당했을 때 시스템이 **안전 상태**를 유지할 수 있다면 할당하고, 그렇지 않으면 다른 프로세스가 자원을 반납할 때까지 할당을 거부한다.
- 이 알고리즘은 최악의 상황(모든 프로세스가 최대 자원을 요구할 때)을 가정하여 교착상태를 회피한다.

---
## 📎 참고 자료
<!-- 공부하면서 참고한 링크를 여기에 추가해주세요 -->
---
## 💬 토론 포인트
<!-- PR 리뷰 또는 스터디 중 나온 추가 질문이나 논의 사항을 기록해주세요 -->
